import{_ as x,c as l,o as a,a as s,b as d,d as g,r as u,e as $,w as v,n as b,f as C,g as y,u as f,v as M,h as R,F as L,i as V,t as k,j as _}from"./index-CoQiJcLF.js";const B={},D={id:"Capa_1",style:{"enable-background":"new 0 0 58 58"},version:"1.1",viewBox:"0 0 58 58","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};function T(n,e){return a(),l("svg",D,e[0]||(e[0]=[s("g",null,[s("path",{d:`M29,1.5c-16.016,0-29,11.641-29,26c0,5.292,1.768,10.211,4.796,14.318\r
      C4.398,46.563,3.254,53.246,0,56.5c0,0,9.943-1.395,16.677-5.462c0.007,0.003,0.015,0.006,0.022,0.009\r
      c2.764-1.801,5.532-3.656,6.105-4.126c0.3-0.421,0.879-0.548,1.33-0.277c0.296,0.178,0.483,0.503,0.489,0.848\r
      c0.01,0.622-0.005,0.784-5.585,4.421C22.146,52.933,25.498,53.5,29,53.5c16.016,0,29-11.641,29-26S45.016,1.5,29,1.5z`,style:{fill:"#ffffff"}})],-1)]))}const j=x(B,[["render",T]]),z={class:"mb-6 flex flex-col gap-6"},N={class:"inline-flex items-center justify-center w-14 h-14 p-3 bg-white/10 rounded-lg mb-4"},A={__name:"ChatHeader",setup(n){return(e,t)=>(a(),l("div",z,[s("div",N,[d(j)]),t[0]||(t[0]=s("h2",{class:"text-white font-semibold text-4xl mb-2"},"Hi there!",-1)),t[1]||(t[1]=s("h1",{class:"text-white font-extrabold text-5xl mb-2"}," What would you like to know? ",-1)),t[2]||(t[2]=s("p",{class:"text-white/60 text-xl max-w-lg"},[g(" Use one of the most common prompts below"),s("br"),g(" or ask your own question ")],-1))]))}},E={},H={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",class:"w-5 h-5"};function I(n,e){return a(),l("svg",H,e[0]||(e[0]=[s("path",{d:"M256 320c53 0 96-43 96-96V96c0-53-43-96-96-96s-96 43-96 96v128c0 53 43 96 96 96zm160-96h-32c0 70-58 128-128 128s-128-58-128-128h-32c0 86 64 158 144 170.7V512h32v-117.3c80-12.7 144-84.7 144-170.7z"},null,-1)]))}const q=x(E,[["render",I]]),K={},U={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128",width:"20",height:"20",fill:"none"};function F(n,e){return a(),l("svg",U,e[0]||(e[0]=[s("g",null,[s("line",{x1:"40.5",y1:"17",x2:"87.5",y2:"64",stroke:"#ffffff","stroke-width":"12","stroke-linecap":"square","stroke-miterlimit":"10"}),s("line",{x1:"87.5",y1:"64",x2:"40.5",y2:"111",stroke:"#ffffff","stroke-width":"12","stroke-linecap":"square","stroke-miterlimit":"10"})],-1)]))}const O=x(K,[["render",F]]);function J(n){const e=u(!1);let t=null;if("webkitSpeechRecognition"in window){const i=window.webkitSpeechRecognition;t=new i,t.lang="ru-RU",t.interimResults=!1,t.maxAlternatives=5,t.onresult=o=>{const c=o.results[0][0].transcript;typeof n=="function"&&n(c)},t.onend=()=>{e.value=!1},t.onerror=o=>{console.error("Speech recognition error:",o),e.value=!1}}else console.warn("SpeechRecognition не поддерживается в этом браузере");function r(){t&&(e.value?t.stop():(t.start(),e.value=!0))}return{isListening:e,toggleListening:r}}const m=$("chat",()=>{const n=u([]),e=u(!1),t=u("");async function r(i){n.value.push({id:Date.now(),from:"user",text:i}),e.value=!0,t.value="";try{const o=await fetch("http://localhost:3000/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:i})}),c=await o.json();if(!o.ok||!c.reply)throw new Error("Ошибка ответа от сервера");n.value.push({id:Date.now()+1,from:"bot",text:c.reply})}catch(o){console.error("Ошибка при отправке сообщения:",o),t.value="Произошла ошибка при обращении к серверу."}finally{e.value=!1}}return{messages:n,sendMessage:r,isLoading:e,errorMessage:t}}),P={class:"w-full my-2 mt-8"},W={class:"relative flex items-center w-full bg-white/5 border-2 border-white/20 rounded-xl pl-4 pr-0 py-3 backdrop-blur-md"},G={__name:"MessageInput",setup(n){const e=u(""),t=m(),r=u(null),{toggleListening:i,isListening:o}=J(h=>{e.value=h});function c(){e.value.trim()&&(t.sendMessage(e.value.trim()),e.value="")}function S(h){h.shiftKey||(h.preventDefault(),c())}return v(e,async()=>{await b(),r.value&&(r.value.style.height="auto",r.value.style.height=r.value.scrollHeight+"px")}),(h,p)=>(a(),l("div",P,[s("div",W,[s("button",{onClick:p[0]||(p[0]=(...w)=>f(i)&&f(i)(...w)),class:y(["transition cursor-pointer p-2 rounded-full",f(o)?"animate-pulse bg-[#687fa5]/40 text-[#fff]":"text-white/60 hover:text-white hover:scale-110"])},[d(q)],2),C(s("textarea",{ref_key:"textareaRef",ref:r,"onUpdate:modelValue":p[1]||(p[1]=w=>e.value=w),onKeydown:R(S,["enter"]),rows:"1",placeholder:"Ask whatever you want",class:"flex-1 w-full min-w-0 bg-transparent pl-2 pr-16 text-white placeholder-white/50 focus:outline-none resize-none overflow-hidden"},null,544),[[M,e.value]]),s("button",{onClick:c,class:"flex items-center justify-center absolute right-1 top-1/2 -translate-y-1/2 h-14 w-14 bg-[#1D4D9B] hover:bg-white/20 text-white p-2 rounded-xl transition cursor-pointer"},[d(O)])])]))}},Q={class:"flex flex-col gap-4 w-full"},X={__name:"MessageList",setup(n){const t=m().messages;return(r,i)=>(a(),l("div",Q,[(a(!0),l(L,null,V(f(t),o=>(a(),l("div",{key:o.id,class:y(["max-w-full sm:max-w-xl px-4 py-2 rounded break-words whitespace-pre-wrap",o.from==="user"?" bg-teal-400 self-start mr-auto":"bg-blue-400 self-end ml-auto"])},k(o.text),3))),128))]))}},Y={class:"w-full h-screen flex flex-col bg-[#072E6A] text-white"},Z={class:"ml-0 lg:ml-[150px] max-w-3xl"},ee={class:"ml-0 lg:ml-[150px] max-w-2xl mt-6"},te={key:0,class:"text-red-500 font-semibold mb-2"},se={key:1,class:"text-white/80 text-sm my-2"},oe={class:"px-2 lg:px-4 pb-2 mt-auto mb-auto"},ne={class:"ml-0 lg:ml-[150px] max-w-2xl w-full"},le={__name:"ChatView",setup(n){const e=m(),t=u(null);return v(()=>e.messages.length,()=>{b(()=>{t.value&&(t.value.scrollTop=t.value.scrollHeight)})}),(r,i)=>(a(),l("div",Y,[s("div",{class:"flex flex-col h-screen overflow-y-auto px-4 pt-12 pb-2",ref_key:"scrollContainer",ref:t},[s("div",Z,[d(A)]),s("div",ee,[f(e).errorMessage?(a(),l("div",te,k(f(e).errorMessage),1)):_("",!0),d(X),f(e).isLoading?(a(),l("div",se," Бот печатает... ")):_("",!0)]),s("div",oe,[s("div",ne,[d(G)])])],512)]))}};export{le as default};
